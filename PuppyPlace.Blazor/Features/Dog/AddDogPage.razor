@page "/add-dog"
@using PuppyPlace.Blazor.Features.Shared
@inject HttpClient _httpClient

<PageTitle>Add Dog</PageTitle>

<h4>Add Dog</h4>

<EditForm Model="_dog" OnValidSubmit="SubmitForm">
    <FluentValidationValidator/>

    <FormSection Title="Details" HelpText="All u gots to do is type the doggie's name, age, and breed">
        <FormFieldSet Width="col-6">
            <label for="dogName" class="font-weight-bold text-secondary">Name</label>
            <InputText @bind-Value="_dog.Name" rows="6" class="form-control" id="dogName"/>
            <ValidationMessage For="@(() => _dog.Name)"/>
        </FormFieldSet>
        <FormFieldSet Width="col-6">
            <label for="dogAge" class="font-weight-bold text-secondary">Age</label>
            <InputText @bind-Value="_dog.Age" rows="6" class="form-control" id="dogAge"/>
            <ValidationMessage For="@(() => _dog.Age)"/>
        </FormFieldSet>
        <FormFieldSet Width="col-6">
            <label for="dogBreed" class="font-weight-bold text-secondary">Breed</label>
            <InputText @bind-Value="_dog.Breed" rows="6" class="form-control" id="dogBreed"/>
            <ValidationMessage For="@(() => _dog.Breed)"/>
        </FormFieldSet>

    </FormSection>

    
    <a href="@($"dogs")" class="btn btn-primary">Previous page</a>
    <button class="btn btn-primary" type="reset">Reset</button>
    <button class="btn btn-primary" type="submit">Submit</button>
</EditForm>

@code {
    private AddEditDogDto _dog = new AddEditDogDto();

    private async Task SubmitForm()
    {
        var postBody = _dog;
        var response = await _httpClient.PostAsJsonAsync("Dog", postBody);
    }
    
}